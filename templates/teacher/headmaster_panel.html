{% extends 'base.html' %}
{% block title %}
    Panel dyrektora szkoły
{% endblock %}
{% block content %}
    <a href="{% url 'edit_school_information' %}">Edytuj informacje o szkole</a>
    <hr>
    <p>kod do dołączenia do szkoły:</p><span id="access_key">{{ school.key }}</span>
    <p>link do dołączenia do szkoły:</p>
    <p>(dzieki temu linkowi uczniowie moga szybko dołaczac do szkoły)</p>
    <input id="text" type="text" >
    <button onclick="copyLink()" id="copy">Kopiuj</button>
    <h3>Prośby o dołączenie do szkoły</h3>
    <ul>
    {% for r in requests_qs %}
    <li>
    {{ r.teacher.user.first_name }} {{ r.teacher.user.last_name }}
    <a href="{% url 'accept_teacher' r.id %}">(akceptuj)</a>
    <a href="{% url 'reject_teacher' r.id %}">(usuń)</a>
    </li>
    {% endfor %}
    </ul>
    <h3><a href="{% url 'students_view' %}">Uczniowie</a></h3>
    <h3>Nauczyciele</h3>
    <ul>
    {% for t in teachers_qs %}
    <li>
    {{ t.user.first_name }} {{ t.user.last_name }}
    {% if t.headmaster.school != school  %}
    <a href="{% url 'dismiss_teacher' t.id %}">(Wyrzuć nauczyciela)</a>
    {% endif %}
    </li>
    {% endfor %}
    </ul>
{% endblock %}
{% block scripts %}
<script>
input = document.getElementById('text')
access_key = document.getElementById('access_key')
input.value = window.location.host + '/student/school/join/' +access_key.textContent


function copyLink() {
    input.select();
    input.setSelectionRange(0, 99999); /* For mobile devices */
    document.execCommand("copy");
}

</script>
{% endblock %}